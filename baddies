--loadstring(game:HttpGet("https://raw.githubusercontent.com/mafuasahina/whatever/main/baddies"))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Backpack = LocalPlayer:WaitForChild("Backpack")

local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")

local hitRemotes = {
	Net:WaitForChild("RE/BeachShovelHit"),
	Net:WaitForChild("RE/panHit"),
	Net:WaitForChild("RE/pinkStopSignalHit"),
	Net:WaitForChild("RE/baseballBatHit"),
}

local stompEvent = ReplicatedStorage:WaitForChild("STOMPEVENT")

local function buyTool(toolName, buttonName)
	if Backpack:FindFirstChild(toolName) or Character:FindFirstChild(toolName) then return end

	local button = workspace:FindFirstChild(buttonName, true)
	if not button then return end

	local prompt = button:FindFirstChildWhichIsA("ProximityPrompt", true)
	if not prompt then return end

	Character:PivotTo(button.CFrame + Vector3.new(0, 2, 0))

	while not (Backpack:FindFirstChild(toolName) or Character:FindFirstChild(toolName)) do
		fireproximityprompt(prompt)
		task.wait()
	end
end

buyTool("Pan", "Pan Buy button")
buyTool("BeachShovel", "botonComprarShovel")

local slayTarget = nil
local isSlaying = false

local function fireHits()
	for _, remote in ipairs(hitRemotes) do
		pcall(function()
			remote:FireServer(1)
		end)
	end
end

local function teleportToSky(character)
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		root.CFrame = CFrame.new(0, 1000, 0)
	end
end

local function fireSlay()
	pcall(function()
		stompEvent:FireServer()
	end)
end

local function moveNearbyPlayers(localRoot)
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			local char = player.Character
			if not char then continue end

			local humanoid = char:FindFirstChild("Humanoid")
			local root = char:FindFirstChild("HumanoidRootPart")
			local pvp = char:FindFirstChild("hasPvpOn")
			local stompable = char:FindFirstChild("canBeStomped")

			if humanoid and root and not stompable and pvp then
				root.CanCollide = false
				root.Size = Vector3.new(20, 20, 20)
				root.CFrame = localRoot.CFrame * CFrame.new(0, 0, -10)
			end
		end
	end
end

Players.PlayerRemoving:Connect(function(player)
	if player == slayTarget then
		slayTarget = nil
		isSlaying = false
	end
end)

RunService.RenderStepped:Connect(function()
	if slayTarget and slayTarget.Character then
		local char = slayTarget.Character
		local humanoid = char:FindFirstChild("Humanoid")
		local root = char:FindFirstChild("HumanoidRootPart")
		local carried = char:FindFirstChild("BeingCarried")
		local stompable = char:FindFirstChild("canBeStomped")
		local pvp = char:FindFirstChild("hasPvpOn")

		if humanoid and (not stompable or humanoid.Health < 1 or carried or not pvp or root.Position.Y > 300) then
			slayTarget = nil
			isSlaying = false
		end
	end

	if not slayTarget then
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				local char = player.Character
				if not char then continue end

				local humanoid = char:FindFirstChild("Humanoid")
				local root = char:FindFirstChild("HumanoidRootPart")
				local carried = char:FindFirstChild("BeingCarried")
				local stompable = char:FindFirstChild("canBeStomped")
				local pvp = char:FindFirstChild("hasPvpOn")

				if humanoid and stompable and humanoid.Health > 1 and not carried and pvp and root then
					if root.Position.Y < 300 then
						slayTarget = player
						isSlaying = true
						break
					end
				end
			end
		end
	end
end)

RunService.Heartbeat:Connect(function()
	local char = LocalPlayer.Character
	local root = char and char:FindFirstChild("HumanoidRootPart")
	if not char or not root then return end

	if isSlaying and slayTarget and slayTarget.Character then
		local targetChar = slayTarget.Character
		local targetroot = targetChar:FindFirstChild("HumanoidRootPart")

		if targetroot then
			root.CFrame = CFrame.new(targetroot.Position + Vector3.new(0, 4, 0)) * CFrame.Angles(math.rad(180), 0, 0)
			fireSlay()
		end
	else
		fireHits()
		teleportToSky(char)
		moveNearbyPlayers(root)
	end
end)

RunService.RenderStepped:Connect(function()
	Net:FindFirstChild("RF/SalonPunch"):InvokeServer()

	local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
	if humanoid and humanoid.Health < 70 then
		Net:FindFirstChild("RF/RequestSurgery"):InvokeServer()
	end
end)
